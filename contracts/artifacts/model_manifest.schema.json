{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Model Manifest",
  "description": "Model manifest serving as handshake between train/deploy/autolabel modules",
  "type": "object",
  "properties": {
    "model_name": {
      "type": "string",
      "description": "Human-readable model name (e.g., 'YOLOv12n-4class')"
    },
    "model_family": {
      "type": "string",
      "enum": ["yolo", "faster_rcnn", "vlm"],
      "description": "Model family/algorithm type"
    },
    "train_id": {
      "type": "string",
      "description": "Training profile ID used to create this model"
    },
    "deploy_id": {
      "type": "string",
      "description": "Deploy profile ID (optional, for deployment-specific configurations)"
    },
    "git_sha": {
      "type": "string",
      "description": "Git commit SHA at time of training"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when model was trained"
    },
    "classes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {"type": "integer"},
          "name": {"type": "string"},
          "group_id": {"type": "integer"},
          "group_name": {"type": "string"}
        },
        "required": ["id", "name"]
      }
    },
    "input": {
      "type": "object",
      "properties": {
        "width": {"type": "integer", "minimum": 1},
        "height": {"type": "integer", "minimum": 1},
        "channels": {"type": "integer", "enum": [1, 3]}
      },
      "required": ["width", "height", "channels"]
    },
    "export_targets": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["pytorch", "onnx", "torchscript", "rknn", "tensorrt"]
      },
      "description": "List of export formats available"
    },
    "metrics": {
      "type": "object",
      "properties": {
        "mAP": {"type": "number", "minimum": 0, "maximum": 1},
        "precision": {"type": "number", "minimum": 0, "maximum": 1},
        "recall": {"type": "number", "minimum": 0, "maximum": 1},
        "f1_score": {"type": "number", "minimum": 0, "maximum": 1}
      }
    },
    "files": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "path": {"type": "string"},
          "sha256": {"type": "string"},
          "type": {"type": "string"},
          "size_bytes": {"type": "integer"}
        },
        "required": ["path", "type"]
      }
    }
  },
  "required": ["model_name", "model_family", "train_id", "created_at", "classes", "input", "files"]
}
